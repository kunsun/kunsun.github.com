{"componentChunkName":"component---src-templates-blog-post-js","path":"/responsible","result":{"data":{"markdownRemark":{"html":"<h2>典型的方案：</h2>\n<ol>\n<li>传统 float 浮动布局</li>\n<li>相对单位布局</li>\n<li>媒体查询</li>\n<li>基于相对单位 rem 的 flexible 布局</li>\n<li>flex 布局</li>\n<li>grid 布局</li>\n<li>借助 JavaScript</li>\n</ol>\n<h2>CSS中的相对单位</h2>\n<ol>\n<li>em</li>\n<li>rem</li>\n<li>vh, vw, wmin, wmax</li>\n<li>%</li>\n<li>calc()</li>\n</ol>\n<h2>各种单位概念</h2>\n<ol>\n<li>屏幕分辨率</li>\n<li>像素</li>\n<li>PPI 每英寸包括的像素数</li>\n<li>DPI 即每英寸包括的点数</li>\n<li>设备独立像素</li>\n<li>设备像素比（dpr） devicePixelRatio</li>\n<li>Meta Viewport</li>\n</ol>\n<h2>像素</h2>\n<ol>\n<li>物理像素（设备像素）： 与设备分辨率相关</li>\n<li>逻辑像素（独立像素）： 用来描述布局，一般为屏幕大小</li>\n<li>像素比：决定了一个css像素点由多少个设备像素点来描绘</li>\n</ol>\n<h2>视图</h2>\n<p>参考官方文章：<a href=\"https://developer.mozilla.org/zh-CN/docs/Mobile/Viewport_meta_tag\">https://developer.mozilla.org/zh-CN/docs/Mobile/Viewport_meta_tag</a></p>\n<ol>\n<li>布局视图  document.documentElement.clientWidth </li>\n<li>视觉视图  </li>\n<li>理想视图：设备尺寸</li>\n</ol>\n<p>width=device-width;  布局视图等于理想视图</p>\n<pre class=\"grvsc-container material-theme\" data-language=\"html\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"mtk1\">&lt;</span><span class=\"mtk4\">meta</span><span class=\"mtk1\"> </span><span class=\"mtk7\">name</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;viewport&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">content</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;width=device-width;initial-scale=1;maximum-scale=1; minimum-scale=1; user-scalable=no;&quot;</span><span class=\"mtk1\">&gt;</span></span></code></pre>\n<h2>REM布局的实现</h2>\n<p>淘宝首页的用法</p>\n<pre class=\"grvsc-container material-theme\" data-language=\"js\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"mtk8\">!</span><span class=\"mtk10\">function</span><span class=\"mtk1\">(</span><span class=\"mtk4 mtki\">e</span><span class=\"mtk1\">,</span><span class=\"mtk4 mtki\">t</span><span class=\"mtk1\">){</span><span class=\"mtk10\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">n</span><span class=\"mtk8\">=</span><span class=\"mtk4\">t</span><span class=\"mtk1\">.</span><span class=\"mtk4\">documentElement</span><span class=\"mtk1\">,</span><span class=\"mtk4\">d</span><span class=\"mtk8\">=</span><span class=\"mtk4\">e</span><span class=\"mtk1\">.</span><span class=\"mtk4\">devicePixelRatio</span><span class=\"mtk8\">||</span><span class=\"mtk7\">1</span><span class=\"mtk1\">;</span><span class=\"mtk10\">function</span><span class=\"mtk1\"> </span><span class=\"mtk3\">i</span><span class=\"mtk1\">(){</span><span class=\"mtk10\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span><span class=\"mtk8\">=</span><span class=\"mtk4\">n</span><span class=\"mtk1\">.</span><span class=\"mtk4\">clientWidth</span><span class=\"mtk8\">/</span><span class=\"mtk7\">3.75</span><span class=\"mtk1\">;</span><span class=\"mtk4\">n</span><span class=\"mtk1\">.</span><span class=\"mtk4\">style</span><span class=\"mtk1\">.</span><span class=\"mtk4\">fontSize</span><span class=\"mtk8\">=</span><span class=\"mtk4\">e</span><span class=\"mtk8\">+</span><span class=\"mtk6\">&quot;px&quot;</span><span class=\"mtk1\">}</span><span class=\"mtk10\">if</span><span class=\"mtk1\">(</span><span class=\"mtk10\">function</span><span class=\"mtk1\"> </span><span class=\"mtk3\">e</span><span class=\"mtk1\">(){</span><span class=\"mtk4\">t</span><span class=\"mtk1\">.</span><span class=\"mtk4\">body</span><span class=\"mtk10\">?</span><span class=\"mtk4\">t</span><span class=\"mtk1\">.</span><span class=\"mtk4\">body</span><span class=\"mtk1\">.</span><span class=\"mtk4\">style</span><span class=\"mtk1\">.</span><span class=\"mtk4\">fontSize</span><span class=\"mtk8\">=</span><span class=\"mtk6\">&quot;16px&quot;</span><span class=\"mtk10\">:</span><span class=\"mtk4\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;DOMContentLoaded&quot;</span><span class=\"mtk1\">,</span><span class=\"mtk4\">e</span><span class=\"mtk1\">)}(),</span><span class=\"mtk3\">i</span><span class=\"mtk1\">(),</span><span class=\"mtk4\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;resize&quot;</span><span class=\"mtk1\">,</span><span class=\"mtk4\">i</span><span class=\"mtk1\">),</span><span class=\"mtk4\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;pageshow&quot;</span><span class=\"mtk1\">,</span><span class=\"mtk10\">function</span><span class=\"mtk1\">(</span><span class=\"mtk4 mtki\">e</span><span class=\"mtk1\">){</span><span class=\"mtk4\">e</span><span class=\"mtk1\">.</span><span class=\"mtk4\">persisted</span><span class=\"mtk8\">&&</span><span class=\"mtk3\">i</span><span class=\"mtk1\">()}),</span><span class=\"mtk7\">2</span><span class=\"mtk8\">&lt;=</span><span class=\"mtk4\">d</span><span class=\"mtk1\">){</span><span class=\"mtk10\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">o</span><span class=\"mtk8\">=</span><span class=\"mtk4\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">createElement</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;body&quot;</span><span class=\"mtk1\">),</span><span class=\"mtk4\">a</span><span class=\"mtk8\">=</span><span class=\"mtk4\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">createElement</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;div&quot;</span><span class=\"mtk1\">);</span><span class=\"mtk4\">a</span><span class=\"mtk1\">.</span><span class=\"mtk4\">style</span><span class=\"mtk1\">.</span><span class=\"mtk4\">border</span><span class=\"mtk8\">=</span><span class=\"mtk6\">&quot;.5px solid transparent&quot;</span><span class=\"mtk1\">,</span><span class=\"mtk4\">o</span><span class=\"mtk1\">.</span><span class=\"mtk3\">appendChild</span><span class=\"mtk1\">(</span><span class=\"mtk4\">a</span><span class=\"mtk1\">),</span><span class=\"mtk4\">n</span><span class=\"mtk1\">.</span><span class=\"mtk3\">appendChild</span><span class=\"mtk1\">(</span><span class=\"mtk4\">o</span><span class=\"mtk1\">),</span><span class=\"mtk7\">1</span><span class=\"mtk8\">===</span><span class=\"mtk4\">a</span><span class=\"mtk1\">.</span><span class=\"mtk4\">offsetHeight</span><span class=\"mtk8\">&&</span><span class=\"mtk4\">n</span><span class=\"mtk1\">.</span><span class=\"mtk4\">classList</span><span class=\"mtk1\">.</span><span class=\"mtk3\">add</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;hairlines&quot;</span><span class=\"mtk1\">),</span><span class=\"mtk4\">n</span><span class=\"mtk1\">.</span><span class=\"mtk3\">removeChild</span><span class=\"mtk1\">(</span><span class=\"mtk4\">o</span><span class=\"mtk1\">)}}(</span><span class=\"mtk4\">window</span><span class=\"mtk1\">,</span><span class=\"mtk4\">document</span><span class=\"mtk1\">)</span></span>\n<span class=\"grvsc-line\"></span>\n<span class=\"grvsc-line\"><span class=\"mtk8\">!</span><span class=\"mtk10\">function</span><span class=\"mtk1\">(</span><span class=\"mtk4 mtki\">e</span><span class=\"mtk1\">, </span><span class=\"mtk4 mtki\">t</span><span class=\"mtk1\">) {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">n</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">t</span><span class=\"mtk1\">.</span><span class=\"mtk4\">documentElement</span><span class=\"mtk1\">,</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">d</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span><span class=\"mtk1\">.</span><span class=\"mtk4\">devicePixelRatio</span><span class=\"mtk1\"> </span><span class=\"mtk8\">||</span><span class=\"mtk1\"> </span><span class=\"mtk7\">1</span><span class=\"mtk1\">;</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">function</span><span class=\"mtk1\"> </span><span class=\"mtk3\">i</span><span class=\"mtk1\">() {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">n</span><span class=\"mtk1\">.</span><span class=\"mtk4\">clientWidth</span><span class=\"mtk1\"> </span><span class=\"mtk8\">/</span><span class=\"mtk1\"> </span><span class=\"mtk7\">3.75</span><span class=\"mtk1\">;</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">n</span><span class=\"mtk1\">.</span><span class=\"mtk4\">style</span><span class=\"mtk1\">.</span><span class=\"mtk4\">fontSize</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">e</span><span class=\"mtk1\"> </span><span class=\"mtk8\">+</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;px&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">    </span><span class=\"mtk5 mtki\">// </span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">function</span><span class=\"mtk1\"> </span><span class=\"mtk3\">e</span><span class=\"mtk1\">() {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">t</span><span class=\"mtk1\">.</span><span class=\"mtk4\">body</span><span class=\"mtk1\"> </span><span class=\"mtk10\">?</span><span class=\"mtk1\"> </span><span class=\"mtk4\">t</span><span class=\"mtk1\">.</span><span class=\"mtk4\">body</span><span class=\"mtk1\">.</span><span class=\"mtk4\">style</span><span class=\"mtk1\">.</span><span class=\"mtk4\">fontSize</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;16px&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk10\">:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;DOMContentLoaded&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">e</span><span class=\"mtk1\">)</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">    }(), </span><span class=\"mtk3\">i</span><span class=\"mtk1\">(), </span><span class=\"mtk4\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;resize&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">i</span><span class=\"mtk1\">), </span><span class=\"mtk4\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;pageshow&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk10\">function</span><span class=\"mtk1\">(</span><span class=\"mtk4 mtki\">e</span><span class=\"mtk1\">) {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">e</span><span class=\"mtk1\">.</span><span class=\"mtk4\">persisted</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&&</span><span class=\"mtk1\"> </span><span class=\"mtk3\">i</span><span class=\"mtk1\">()</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">    }), </span><span class=\"mtk7\">2</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&lt;=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">d</span><span class=\"mtk1\">) {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">var</span><span class=\"mtk1\"> </span><span class=\"mtk4\">o</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">createElement</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;body&quot;</span><span class=\"mtk1\">),</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">            </span><span class=\"mtk4\">a</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">t</span><span class=\"mtk1\">.</span><span class=\"mtk3\">createElement</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;div&quot;</span><span class=\"mtk1\">);</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">a</span><span class=\"mtk1\">.</span><span class=\"mtk4\">style</span><span class=\"mtk1\">.</span><span class=\"mtk4\">border</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;.5px solid transparent&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">o</span><span class=\"mtk1\">.</span><span class=\"mtk3\">appendChild</span><span class=\"mtk1\">(</span><span class=\"mtk4\">a</span><span class=\"mtk1\">), </span><span class=\"mtk4\">n</span><span class=\"mtk1\">.</span><span class=\"mtk3\">appendChild</span><span class=\"mtk1\">(</span><span class=\"mtk4\">o</span><span class=\"mtk1\">), </span><span class=\"mtk7\">1</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk4\">a</span><span class=\"mtk1\">.</span><span class=\"mtk4\">offsetHeight</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&&</span><span class=\"mtk1\"> </span><span class=\"mtk4\">n</span><span class=\"mtk1\">.</span><span class=\"mtk4\">classList</span><span class=\"mtk1\">.</span><span class=\"mtk3\">add</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;hairlines&quot;</span><span class=\"mtk1\">), </span><span class=\"mtk4\">n</span><span class=\"mtk1\">.</span><span class=\"mtk3\">removeChild</span><span class=\"mtk1\">(</span><span class=\"mtk4\">o</span><span class=\"mtk1\">)</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">}(</span><span class=\"mtk4\">window</span><span class=\"mtk1\">, </span><span class=\"mtk4\">document</span><span class=\"mtk1\">)</span></span></code></pre>\n<h3>REM总结</h3>\n<p>要显示小于1px的边框，有两张方案：</p>\n<ol>\n<li>使用drp重新修改<meta name=\"viewport\" content=\"width=device-width; initial-scale=1/dpr, maximum-scale=1/dpr\" ></li>\n<li>或者使用CSS ::before background-image:linear-greadient();</li>\n</ol>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n  }\n  \n  .grvsc-code {\n    display: inline-block;\n    min-width: 100%;\n  }\n  \n  .grvsc-line {\n    display: inline-block;\n    box-sizing: border-box;\n    width: 100%;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-line-highlighted {\n    background-color: var(--grvsc-line-highlighted-background-color, transparent);\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, transparent);\n  }\n  \n  .material-theme {\n    background-color: #282c34;\n    color: #abb2bf;\n  }\n  .material-theme .mtki { font-style: italic; }\n  .material-theme .mtk1 { color: #ABB2BF; }\n  .material-theme .mtk4 { color: #E06C75; }\n  .material-theme .mtk7 { color: #D19A66; }\n  .material-theme .mtk6 { color: #98C379; }\n  .material-theme .mtk8 { color: #56B6C2; }\n  .material-theme .mtk10 { color: #C678DD; }\n  .material-theme .mtk3 { color: #61AFEF; }\n  .material-theme .mtk5 { color: #7F848E; }\n</style>","frontmatter":{"date":"February 02, 2021","path":"/responsible","title":"响应式布局"}}},"pageContext":{}},"staticQueryHashes":[]}