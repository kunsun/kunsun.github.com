{"componentChunkName":"component---src-templates-blog-post-js","path":"/https-learn","result":{"data":{"markdownRemark":{"html":"<p>这个文章讲的特别清楚：<a href=\"https://juejin.im/post/6844903545272041479\">https://juejin.im/post/6844903545272041479</a></p>\n<ol>\n<li>https相比http在请求前多了一个握手的过程；</li>\n<li>在握手时，你和你想访问的网站会交换一个密钥；</li>\n<li>握手完成后，你的请求先用密钥加密才会发出去；</li>\n<li>网站服务器的响应会先用密钥加密再传给你</li>\n</ol>\n<h2>加密方法</h2>\n<ol>\n<li>对称加密： 采用同样的密钥，一个正向加密，另一个反向解密</li>\n<li>非对称加密： 如果通信双方都各自持有同一个密钥，且没有别人知道，这两方的通信安全当然是可以被保证的</li>\n</ol>\n<h2>握手</h2>\n<p>密钥在服务器传输时传递是非常耗时的</p>\n<ol>\n<li>服务器发出一张证书，带着共钥</li>\n<li>客户端用公钥加密了一段较短的数据S， 并返回给服务器</li>\n<li>服务器用私钥解开，拿到S</li>\n<li>握手步骤完成，S成为了一个被安全传输到对方手中的对称加密密钥</li>\n</ol>\n<h2>最大的问题</h2>\n<p>这个密钥怎么让传输的双方知晓，同时不被别人知道</p>\n<p>解决方案1:\n浏览器只要预存好世界上所有HTTPS网站的密钥就行\n结论：\n不现实</p>\n<h2>非对称加密+对称加密</h2>\n<ol>\n<li>某服务器拥有用于非对称加密的公钥A、私钥A'</li>\n<li>浏览器像网站服务器请求，服务器把公钥A明文给传输浏览器</li>\n<li>浏览器随机生成一个用于对称加密的密钥X，用公钥A加密后传给服务器。</li>\n<li>服务器拿到后用私钥A’解密得到密钥X</li>\n<li>这样双方就都拥有密钥X了，且别人无法知道它。之后双方所有数据都用密钥X加密解密。</li>\n</ol>\n<h2>公信力： 数字证书</h2>\n<p>从数字证书中拿到共钥</p>\n<p>证书防止篡改： 数字签名</p>\n<p>数字签名的制作过程：</p>\n<p>CA拥有非对称加密的私钥和公钥。\nCA对证书明文信息进行hash。\n对hash后的值用私钥加密，得到数字签名。</p>\n<h2>数字证书浏览器验证过程：</h2>\n<ol>\n<li>拿到证书，得到明文T，数字签名S。</li>\n<li>用CA机构的公钥对S解密（由于是浏览器信任的机构，所以浏览器保有它的公钥。），得到S’。</li>\n<li>用证书里的hash算法对明文T进行hash得到T’。</li>\n<li>比较S’是否等于T’，等于则表明证书可信。</li>\n</ol>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n  }\n  \n  .grvsc-code {\n    display: inline-block;\n    min-width: 100%;\n  }\n  \n  .grvsc-line {\n    display: inline-block;\n    box-sizing: border-box;\n    width: 100%;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-line-highlighted {\n    background-color: var(--grvsc-line-highlighted-background-color, transparent);\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, transparent);\n  }\n  \n</style>","frontmatter":{"date":"February 02, 2021","path":"/https-learn","title":"HTTPS学习"}}},"pageContext":{}},"staticQueryHashes":[]}